<!--<script>
  var thisPage=false;
  window.onbeforeunload=function checkLeave(e){
    var evt = e ? e : (window.event ? window.event : null);  //此方法为了在firefox中的兼容
    if(!thisPage)evt.returnValue='离开后将不会保存账户信息。';
  };
</script>-->
<div class="row free-base">
  <div class="col-md-12" style="text-align: center">
    <div class="circle circle-active">
      <div>1</div>
      <span class="help-block">企业基本信息</span>
    </div>
    <div class="circle-line ">
      <div></div>
    </div>
    <div class="circle">
      <div>2</div>
      <span class="help-block">行业经验</span>
    </div>
    <div class="circle-line skill-line">
      <div></div>
    </div>
    <div class="circle circle-skill">
      <div>3</div>
      <span class="help-block">擅长技能</span>
    </div>
    <div class="circle-line circle-resume">
      <div></div>
    </div>
    <div class="circle">
      <div>4</div>
      <span class="help-block">企业资质</span>
    </div>
  </div>
</div>
<hr>
<div class="form-container" style="margin-top: 70px">
  <form class="form-horizontal" name="base" ng-submit="vm.next()">
    <div class="form-group" style="position: relative;margin-top: -78px;border-bottom: none">
      <div class="col-md-5 col-md-offset-2">
        <label><input type="radio" name="baseType" ng-model="vm.base.basetype" ng-value="0" required/><span class="normal-weight"> 我要发布项目，想找承包方</span></label>
      </div>
      <div class="col-md-5">
        <label><input type="radio" name="baseType" ng-model="vm.base.basetype" ng-value="1" required/><span class="normal-weight"> 我要承接项目，想找发包方</span></label>
      </div>
    </div>
    <div class="form-group" ng-class="{'has-success': base.flattype.$valid}">
      <div class="col-md-2 control-label">
        <label>单位类型</label>
      </div>
      <div class="col-md-10" style="padding-top: 4px">
        <div class="col-md-2" ng-repeat="i in vm.flattypeArr" ng-class="{'no-padding-left': $index === 0}">
          <label><input type="radio" name="flattype" ng-value="i.id" ng-model="vm.base.flattype" required/><span class="normal-weight"> {{i.name}}</span></label>
        </div>
      </div>
    </div>
    <div class="form-group" ng-class="{'has-success': base.idType.$valid}">
      <div class="col-md-2 control-label">
        <label>营业执照类型</label>
      </div>
      <div class="col-md-5 margin-seven">
        <label><input type="radio" name="idType" ng-model="vm.base.idtype" ng-value="0" required/><span class="normal-weight"> 普通营业执照( 存在独立的组织机构代码证)</span></label>
      </div>
      <div class="col-md-5 margin-seven">
        <label><input type="radio" name="idType" ng-model="vm.base.idtype" ng-value="1" required/><span class="normal-weight"> 多证合一营业执照( 不存在独立的组织机构代码证)</span></label>
      </div>
    </div>
    <div class="form-group" ng-class="{'has-success': vm.base.idimage}">
      <div class="col-md-2 control-label">
        <label>上传营业执照</label>
      </div>
      <div class="col-md-5">
        <single-uploader url="vm.base.idimage"></single-uploader>
      </div>
      <div class="col-md-5">
        <div style="height: 100px;width: 80px;background-color: #00b3ee">
          <img alt="请上传照片" ng-src="{{vm.base.idimage}}" style="width: 100%;height: 100%"/>
        </div>
      </div>
    </div>
    <div class="form-group" ng-class="{'has-success': base.name.$valid}">
      <div class="col-md-2 control-label">
        <label>单位名称</label>
      </div>
      <div class="col-md-10">
        <input type="text"
               ng-class="{'error-input': (base.name.$error.required && base.name.$touched)}"
               name="name"
               class="form-control"
               ng-model="vm.base.name"
               placeholder="请输入企业名称"
               required/>
        <div class="help-block error-font" ng-if="base.name.$error.required && base.name.$touched">企业名称不能为空</div>
        <!--ng-pattern="/^[u4e00-u9fa5],{0,}$/"-->
        <!--<div class="help-block error-font" ng-if="base.name.$error.pattern && base.name.$touched">企业名称必须为中文</div>-->
        <span ng-if="base.name.$valid" class="input-result"><i class="fa fa-check"></i></span>
      </div>
    </div>
    <div class="form-group" ng-class="{'has-success':base.proscope.$valid}">
      <div class="col-md-2 control-label">
        <label>营业范围</label>
      </div>
      <div class="col-md-10">
        <textarea name="proscope"
                  ng-class="{'error-input': ((base.proscope.$error.required || base.proscope.$error.minlength) && base.proscope.$touched)}"
                  ng-minlength="10" class="form-control" ng-model="vm.base.proscope" placeholder="请输入营业范围，不得少于10个字符" required=""></textarea>
        <div class="help-block error-font" ng-if="base.proscope.$error.required && base.proscope.$touched">营业范围不能为空</div>
        <div class="help-block error-font" ng-if="base.proscope.$error.minlength && base.proscope.$touched">营业范围不得少于10个字</div>
      </div>
    </div>
    <div class="form-group" ng-class="{'has-success':base.password.$valid}">
      <div class="col-md-2 control-label">
        <label for="">密码</label>
      </div>
      <div class="col-md-10">
        <input type="password"
               name="password"
               ng-model="vm.base.password"
               class="form-control"
               ng-class="{'error-input':base.password.$invalid && base.password.$touched}"
               ng-pattern="/^(?!([a-zA-Z]+|\d+)$)[a-zA-Z\d]{8}$/"
               placeholder="密码必须为字母+数字,长度为8位"
               ng-maxlength="8"
               ng-minlength="8"
               required/>
        <div class="help-block error-font" ng-if="(base.password.$error.minlength || base.password.$error.maxlength) && base.password.$touched">密码长度必须为8位</div>
        <div class="help-block error-font" ng-if="(base.password.$error.required) && base.password.$touched">密码不能为空</div>
        <div class="help-block error-font" ng-if="(base.password.$error.pattern) && base.password.$touched">密码必须为字母数字组合</div>
        <span class="input-result" ng-if="base.password.$valid"><i class="fa fa-check"></i></span>
      </div>
    </div>
    <div class="form-group"   ng-class="{'has-success': base.reqpassword.$valid && vm.base.reqpassword === vm.base.password }">
      <div class="col-md-2 control-label">
        <label for="">确认密码</label>
      </div>
      <div class="col-md-10">
        <input type="password"
               ng-class="{'error-input': vm.base.reqpassword != vm.base.password &&  base.reqpassword.$touched}"
               name="reqpassword" class="form-control" placeholder="再次输入密码" ng-model="vm.base.reqpassword" maxlength="8" minlength="8" required/>
        <div class="help-block error-font" ng-if="(vm.base.reqpassword != vm.base.password) && base.reqpassword.$touched">请与原密码保持一致</div>
        <span class="input-result" ng-if="(vm.base.reqpassword === vm.base.password)  && base.reqpassword.$touched && base.reqpassword.$valid"><i class="fa fa-check"></i></span>
      </div>
    </div>
    <div class="form-group" ng-class="{'has-success':vm.unitaddr.province && vm.unitaddr.city}">
      <div class="col-md-2 control-label">
        <label>单位所在地</label>
      </div>
      <div class="col-md-5">
        <select name="province" id="province" class="form-control" ng-model="vm.unitaddr.province" ng-options="i.id as i.name for i in vm.provinces" required>
          <option value="">请选择省份</option>
        </select>
      </div>
      <div class="col-md-5">
        <select name="city" id="city" class="form-control" ng-model="vm.unitaddr.city" ng-options="i.id as i.name for i in vm.cities" required>
          <option value="">请选择市</option>
        </select>
      </div>
    </div>
    <div class="form-group"  ng-class="{'has-success': base.dobusiness.$valid}">
      <div class="col-md-2 control-label">
        <label for="">营业期限</label>
      </div>
      <div class="col-md-5">
        <input type="text" name="dobusiness" required ng-model="vm.base.dobusiness" format="YYYY-MM-DD" date-time min-view="date"
               timezone="Asia/Shanghai" auto-close="true"
               class="form-control" placeholder="">
        <div class="help-block error-font" ng-if="(base.dobusiness.$error.required) && base.dobusiness.$touched">营业期限不能为空</div>
        <span class="input-result" ng-if="base.dobusiness.$valid && base.dobusiness.$touched"><i class="fa fa-check"></i></span>
      </div>
      <div class="col-md-5" style="padding-top: 4px">
        <label><input type="checkbox" ng-model="vm.base.dobusiness" ng-true-value = "'2099-12-31'" ng-false-value="" /><span class="normal-weight"> 长期</span></label>
      </div>
    </div>
    <div class="form-group" ng-class="{'has-success': base.orgcode.$valid}" ng-if="vm.base.idtype === 0">
      <div class="col-md-2 control-label">
        <label for="">组织机构代码</label>
      </div>
      <div class="col-md-10">
        <input type="text"
               ng-model="vm.base.orgcode"
               name="orgcode"
               ng-class="{'error-input': ((base.orgcode.$error.required) && base.orgcode.$touched)}"
               class="form-control"
               placeholder="请输入正确的组织机构代码" required
        />
        <div class="help-block error-font" ng-if="(base.orgcode.$error.required) && base.orgcode.$touched">组织机构代码不能为空</div>
        <span class="input-result" ng-if="base.orgcode.$valid"><i class="fa fa-check"></i></span>
      </div>
    </div>
    <div class="form-group" ng-class="{'has-success': base.orgcode.$valid}" ng-if="vm.base.idtype === 1">
      <div class="col-md-2 control-label">
        <label for="">统一社会信用代码</label>
      </div>
      <div class="col-md-10">
        <input type="text"
               ng-model="vm.base.orgcode"
               name="orgcode"
               ng-class="{'error-input': ((base.orgcode.$error.required) && base.orgcode.$touched)}"
               class="form-control"
               placeholder="请输入正确的统一社会信用代码" required
        />
        <div class="help-block error-font" ng-if="(base.orgcode.$error.required) && base.orgcode.$touched">组织机构代码不能为空</div>
        <span class="input-result" ng-if="base.orgcode.$valid"><i class="fa fa-check"></i></span>
      </div>
    </div>
    <div class="form-group"   ng-class="{'has-success': base.legname.$valid}">
      <div class="col-md-2 control-label">
        <label for="">法定代表人姓名</label>
      </div>
      <div class="col-md-10">
        <input type="text"
               name="legname"
               ng-model="vm.base.legname"
               ng-pattern="/^[\u2e80-\u9fff]+$/"
               ng-class="{'error-input': ((base.legname.$error.required || base.legname.$error.pattern) && base.legname.$touched)}"
               class="form-control" placeholder="请输入法定代表人姓名" required
        />
        <div class="help-block error-font" ng-if="(base.legname.$error.required) && base.legname.$touched">法定代表人姓名不能为空</div>
        <div class="help-block error-font" ng-if="base.legname.$error.pattern && base.legname.$touched">请输入中文姓名</div>
        <span class="input-result" ng-if="base.legname.$valid"><i class="fa fa-check"></i></span>
      </div>
    </div>
    <div class="form-group" ng-class="{'has-success': base.cardnum.$valid}">
      <div class="col-md-2 control-label">
        <label for="">身份证号</label>
      </div>
      <div class="col-md-10">
        <input type="text"
               class="form-control"
               ng-model="vm.base.cardnum"
               name="cardnum"
               ng-minlength="18"
               ng-maxlength="18"
               ng-class="{'error-input': ((base.cardnum.$error.required || base.cardnum.$error.minlength) && base.cardnum.$touched)}"
               placeholder="请输入正确的身份证号" required/>
        <div class="help-block error-font" ng-if="(base.cardnum.$error.required) && base.cardnum.$touched">身份证号不能为空</div>
        <div class="help-block error-font" ng-if="(base.cardnum.$error.minlength || base.cardnum.$error.maxlength) && base.cardnum.$touched">长度必须为18位</div>
        <span class="input-result" ng-if="base.cardnum.$valid"><i class="fa fa-check"></i></span>
      </div>
    </div>
    <div class="form-group" ng-class="{'has-success':base.validity.$valid}">
      <div class="col-md-2 control-label">
        <label>证件有效期</label>
      </div>
      <div class="col-md-5">
        <input type="text" name="validity" required ng-model="vm.base.validity" format="YYYY-MM-DD" date-time min-view="date"
               timezone="Asia/Shanghai" auto-close="true"
               class="form-control" placeholder="">
        <div class="help-block error-font" ng-if="(base.validity.$error.required) && base.validity.$touched">证件有效期不能为空</div>
        <span class="input-result" ng-if="base.validity.$valid"><i class="fa fa-check"></i></span>
      </div>
      <div class="col-md-5" style="padding-top: 4px">
        <label><input type="checkbox" ng-true-value = "'2099-12-31'" ng-false-value="" ng-model="vm.base.validity"/><span class="normal-weight"> 长期</span></label>
      </div>
    </div>
    <div class="form-group" ng-class="{'has-success': base.rank.$valid}">
      <div class="col-md-2 control-label">
        <label>填写人身份</label>
      </div>
      <div class="col-md-5">
        <label class="margin-seven"><input type="radio" name="rank" ng-model="vm.base.rank" ng-value="'我是法定代表人'" required/><span class="normal-weight"> 我是法定代表人</span></label>
      </div>
      <div class="col-md-5">
        <label class="margin-seven"><input type="radio" name="rank" ng-model="vm.base.rank" ng-value="'我是代理人'" required/><span class="normal-weight"> 我是代理人</span></label>
      </div>
    </div>
    <div class="form-group" ng-class="{'has-success': base.telnum.$valid}">
      <div class="col-md-2 control-label">
        <label for="">联系人手机号</label>
      </div>
      <div class="col-md-10">
        <input type="text"
               class="form-control"
               ng-model="vm.base.telnum"
               name="telnum"
               ng-minlength="11"
               ng-maxlength="11"
               ng-pattern="/^[0-9]{11}/"
               placeholder="请输入手机号" required
        />
          <span class="help-block error-font"
                ng-if="base.telnum.$error.required && base.telnum.$touched">手机号不能为空</span>
   <!--   <span class="help-block error-font"
            ng-if="(base.telnum.$error.minlength || base.telnum.$error.maxlength)&& base.telnum.$touched">手机号必须为11位</span>-->
      <span class="help-block error-font"
            ng-if="(base.telnum.$error.tel || base.telnum.$error.pattern) && base.telnum.$touched">请输入正确的手机号</span>
        <span class="input-result" ng-if="base.telnum.$valid"><i class="fa fa-check"></i></span>
      </div>
    </div>
    <div class="form-group" style="border-bottom: none">
      <div class="col-md-10 col-md-offset-2">
        <button type="submit" class="btn btn-primary">下一步</button>
        <!--<button type="submit" class="btn btn-primary" ng-disabled="base.$invalid">下一步</button>-->
      </div>
    </div>
  </form>
</div>
